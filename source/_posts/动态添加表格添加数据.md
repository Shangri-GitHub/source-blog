---
title: 动态添加表格添加数据
date: 2017-04-26 22:08:41
tags:
---
> 动态生成表格

``` html
 <table id="table" class="table table-bordered"></table>
```
``` javascript
    var array = [
        {
            "id": "operation_manage",
            "name": "运营管理",
            "features": [
                {
                    "value": "operation_01",
                    "name": "商品管理",
                    "isChecked": true
                },
                {
                    "value": "operation_02",
                    "name": "售货机管理",
                    "isChecked": true
                },
                {
                    "value": "operation_03",
                    "name": "点位管理",
                    "isChecked": true
                }
            ]
        },
        {
            "id": "setting_manage",
            "name": "配置中心",
            "features": [
                {
                    "value": "setting_01",
                    "name": "角色管理",
                    "isChecked": false

                },
                {
                    "value": "setting_02",
                    "name": "组织设置",
                    "isChecked": false
                },
                {
                    "value": "setting_03",
                    "name": "用户管理",
                    "isChecked": true
                }

            ]
        },
    ];
    function add() {
        var myTd;
        for (var i = 0; i < array.length; i++) {
            var $name = $('<tr><td><input type="checkbox" value="' + array[i].id + '">' + array[i].name + '</td><td></td></tr>')
            $('table').append($name)
            var featuresArr = array[i].features;
            for (var j = 0; j < featuresArr.length; j++) {
                var features = featuresArr[j].name;
                var featuresValue = featuresArr[j].value;
                var featuresIsChecked = featuresArr[j].isChecked;
                if (featuresIsChecked) {
                    myTd = $('<span><input checked="checked" type="checkbox" value="' + featuresValue + '">' + features + '</span>')
                    $('#table tr td:even input').prop('checked',true)
                } else {
                    myTd = $('<span><input  type="checkbox" value="' + featuresValue + '">' + features + '</span>')
                }
                $($('table tr')[i]).find('td').eq(1).append(myTd);
            }
        }
    }
    add()
    // 全选
    $('#table tr td:even').click(function () {
        var firstVal = $(this).find('input').prop('checked');
        $(this).siblings().find('input').prop('checked', firstVal);

    })
    // 关联
    $('#table tr td:odd').click(function () {
        var num = 0
        $(this).find('input').each(function (i, e) {
            if (e.checked) {
                num++
            }
        })
        if (num > 0) {
            $(this).siblings().find('input').prop('checked', true)
        } else {
            $(this).siblings().find('input').prop('checked', false)
        }
    })
    // 全选和全不选
    $('#selectAll').click(function () {
        $('input[type="checkbox"]').not('#selectAll').prop('checked', $('#selectAll').prop('checked'))
    })
    $('#submit').on('click', function () {
        var arr = [];
        $('input:checked').each(function (i, e) {
            arr.push($(e).val())
        })
        console.log(arr);
    })

```
